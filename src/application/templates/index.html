{% extends "base.html" %}

{% block content %}

    {% if not result %}
        <!--Links to the login handler-->
        Login with <a href="login/fb">Facebook</a>
        <br />
        Login with <a href="login/tw">Twitter</a>
        <br />

        <!--OpenID form-->
{#        <form action="login/oi">#}
{#            <input type="text" name="id" value="me.yahoo.com" />#}
{#            <input type="submit" value="Authenticate With OpenID">#}
{#        </form>#}

    {% else %}

        {# Check for errors. #}
        {% if result.error %}
            <h2>Damn that error: {{ result.error.message }}</h2>
        {% endif %}

        {# Welcome the user. #}
        {% if result.user %}
            <h1>Hi {{ result.user.name }}</h1>
            <h2>Your id is: {{ result.user.id }}</h2>
            <h2>Your email is: {{ result.user.email }}</h2>
        {% endif %}

        {# If the user has credentials, we can access his/her protected resources. #}
        {% if result.user.credentials %}

            {# Let's get the user's 5 most recent statuses. #}
            {% if result.provider.name == 'fb' %}
                Your are logged in with Facebook.<br />
            {% endif %}{# result.provider.name == 'fb' #}

            {# Do the same for Twitter. #}
            {% if result.provider.name == 'tw' %}
                Your are logged in with Twitter.<br />
            {% endif %}{# result.provider.name == 'tw' #}

        {% endif %}{# result.user.credentials #}
    {% endif %}

{% endblock content %}
